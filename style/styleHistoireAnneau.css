/*---------STYLE GENERAL DU CONTENU PRINCIPAL-----------*/

h3 {
    opacity: 0.2;
    margin: auto;
    margin-top: 5px;
    transition: 1s;
}

section {
    max-width: 1100px;
    margin: 20px auto;
    /*La règle 'overflow: hidden' va nous servir ici à camoufler le bloc
    qui translate pour dévoiler le texte.*/
    overflow: hidden;
    background-color: black;
    padding: 3px;
    border: 2px ridge goldenrod;
    border-radius: 200px;
    transition: 1s;
    cursor: url(pointeurs/oeildesauron.png), pointer;
}

section:hover figure img {
    opacity: 0.2;
    transition: 0.5s;
}

section:hover {
    border-radius: 0;
    transition: 2s;
}

section:hover h3 {
    transform: rotateX(360deg);
    opacity: 1;
    transition: 1s;
}

/*------------------------------------------------------*/

/*-----------SECTION DIALOGUE---------------------------*/

/*Le contenu de ce type de section n'est visible qu'au survol,
excepté son titre.*/

.dialogue figure {
    /*La figure est en grid, une colonne pour l'image et une autre
    pour le script, à la manière de ce qui a été fait dans la page
    Environnements.*/
    border-radius: 20px;
    display: grid;
    grid-template-columns: auto 1fr;
    background-color: black;
    text-align: center;
}

.dialogue figure figcaption, .histoire figcaption {
    padding: 1%;
    color: goldenrod;
    font-family: 'ringbearermedium';
    text-decoration: underline;
    text-decoration-color: green;
}

.devoileTexte {
    /*Voilà notre fameux bloc qui cache le script. On dira 'bloc camoufleur'.
    On lui fait prendre 100% de la largeur de la figcaption pour qu'il puisse camoufler
    tout le script. Ensuite, on vient le positionner par-dessus le script avec
    une 'position: relative'.*/
    position: relative;
    width: 100%;
    height: 80%;
    bottom: 65px;
    border-radius: 20px;
    background-color: black;
    transition: 3s;
}

.dialogue figure img {
    /*On augmente le z-index de l'image pour que le bloc camoufleur
    ne lui passe pas devant (mais derrière) lors de sa translation*/
    z-index: 1;
    width: 200px;
    border: 2px ridge green;
    border-radius: 20px 0 0 20px;
    margin: auto;
    opacity: 0;
    transition: 0.2s;
}

.dialogue figure:hover img, .histoire:hover img, .choix button, .choix a {
    /*On applique l'animation écrite dans stylePrincipal.css pour les images
    des sections au survol de leur figure, ainsi qu'aux deux options de la section
    choix.*/
    animation-name: pulsation;
    animation-duration: 1s;
    animation-iteration-count: infinite;
    animation-direction: alternate;
}

.dialogue figure:hover .devoileTexte {
    /*Quand la figure est survolée, le bloc qui camoufle le texte translate vers
    la droite et grâce à la transition, dévoile le texte au fur-et-à-mesure.*/
    transform: translateX(200%);
    transition: 6s;
}

/*Les lignes ci-dessous permettent l'alternance de position image/texte,
voir styleEnvironnements.css*/
.dialogue figure:nth-of-type(even) {
    grid-template-columns: 1fr auto;
}

.dialogue figure:nth-of-type(even) img {
    border-radius: 0 20px 20px 0;
    grid-column: 2;
}

.dialogue figure:nth-of-type(even) figcaption {
    grid-column: 1;
    grid-row: 1;
}

/*-------------------------------------------------------*/

/*---------------SECTION HISTOIRE------------------------*/

/*Le contenu de ce type de section n'est visible qu'au survol,
excepté son titre.*/

.histoire figure {
    display: grid;
    justify-content: center;
    grid-template-columns: auto auto;
    gap: 10px;
}

#poesie {
    /*Le long texte*/
    text-align: justify;
    padding: 10px;
}

.histoire img {
    width: 300px;
    margin: auto;
    border-radius: 30px;
    border: 2px ridge goldenrod;
    align-self: center;
    opacity: 0;
    transition: 0.2s;
}

.devoilePoesie {
    /*Le bloc camoufleur des sections histoire n'est pas différent de celui des
    sections dialogue, si ce n'est dans sa direction de translation et dans son
    positionnement et sa largeur de base.*/

    /*width: 105% pour prendre un peu plus de place que le texte (et couvrir ce qui
    dépassait légèrement)*/
    width: 105%;
    height: 100%;
    background-color: black;
    position: relative;
    bottom: 280px;
    right: 5px;
    transition: 0.5s;
}

.histoire:hover img {
    opacity: 0.2;
    transition: 0.5s;
}

.histoire:hover .devoilePoesie {
    /*Le bloc camoufleur translate vers le bas avec une transition
    et dévoile phrase par phrase le texte.*/
    transform: translateY(200%);
    transition: 14s;
}

/*---------------------------------------------------*/

/*------------CHOIX----------------------------------*/

/*Le contenu de ce type de section n'est visible qu'au survol,
excepté son titre.*/

.choix {
    border-radius: 50px;
    text-align: center;
    width: max-content;
    margin: 20px auto;
    padding: 20px;
}

.choix ul {
    padding: 0;
    list-style: none;
    display: grid;
    grid-template-columns: 200px 200px;
    gap: 25px;
    justify-content: center;
    align-content: center;
}

.choix li {
    width: 200px;
    height: 100px;
    border: 2px ridge goldenrod;
    opacity: 0;
    transition: 0.2s;
}

.choix:hover li {
    opacity: 1;
    transition: 0.5s;
}

.choix button {
    background-color: black;
}

.choix button, .choix a {
    text-decoration-color: green;
    color: goldenrod;
    display: block;
    height: 100%;
    width: 100%;
    font-family: "ringbearermedium";
    font-size: 0.8em;
    text-decoration: underline;
    border: none;
    cursor: url(pointeurs/anneaucursor.png), pointer;
}


.choix:hover button, .choix:hover a{
    opacity: 0.5;
    transition: 0.2s;
}

.choix a {
    opacity: 0;
    padding-top: 40px;
    padding-bottom: 40px;
}

/*Gollum est caché.*/
.choix img {
    display: none;
}

/*Le clic du bouton ou son verrouillage énerve Gollum (l'image qui suit
immédiatement le bouton apparaît).

Elle est en position absolute pour ne pas déranger le contenu de la page.
On la met au premier-plan avec z-index: 1.
On la centre horizontalement avec left:50% et translate(-50%,xx)

On précise que sa hauteur doit couvrir 95% de la fenêtre.
*/
#screamerTrigger:focus + img {
    display: block;
    border: 4px ridge green;
    position: absolute;
    z-index: 1;
    height: 95vh;
    left: 50%;
    transform: translate(-50%,-60%);
}

/*-----------------------------------------------------*/

/*----------------RESPONSIVE DESIGN--------------------*/

@media (max-width: 1100px) {
  /*Sur les écrans de moyenne taille, la différence principale est dans les sections
  dialogue : le script et son image ne sont plus côte-à-côte.*/
    section h3 {
        font-size: 1.2em;
    }
    .histoire figure {
        grid-template-columns: auto;
    }
    #poesie {
        text-align: center;
    }
    .dialogue figure {
        grid-template-columns: auto;
    }
    .dialogue figure img {
        border-radius: 0;
    }
    .dialogue figure:nth-of-type(even) img,
    .dialogue figure:nth-of-type(even) figcaption {
        border-radius: revert;
        grid-column: 1;
        grid-row: revert;
    }
}

@media (max-width: 820px) {
    /*Sur les petits écrans, l'effet de dévoilement de texte n'est pas
    maintenable (le texte ne peut pas être contenu sur une ligne et le survol
    n'est pas pratique sur mobile)

    Cependant, on met l'animation pulsation sur toutes les images des sections

    On change l'affichage des titres : ils passent en inline et ne sont plus contraints
    par leur longueur.*/
    .devoileTexte, .devoilePoesie {
        display: none;
    }
    main section, .choix {
        text-align: center;
        border-radius: 5px;
    }
    main section img {
        animation-duration: 1s;
        animation-iteration-count: infinite;
        animation-name: pulsation;
        animation-direction: alternate;
    }
    h3 {
        display: inline;
        border: 0;
        font-style: italic;
        opacity: 1;
    }
    .choix ul {
        grid-template-columns: auto;
    }
    .choix li, .choix button {
        opacity: 1;
        display: block;
    }
    .choix img {
        /*On ne déclenche l'animation qu'après un délai de 10s.*/
        animation-delay: 10s;
    }
}

/*--------------------------------------------------------*/
